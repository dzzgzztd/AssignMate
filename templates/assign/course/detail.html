{% extends "assign/base.html" %}
{% load assign_tags %}

{% block title %}{{ course.title }} - Course Detail{% endblock %}

{% block content %}
<h1>{{ course.title }}</h1>
<p class="date">Создан {{ course.creator.username }}, дата создания: {{ course.publish.date }}</p>

{% if request.user == course.creator %}
    <p><a href="{% url 'assign:add_homework' %}?course_id={{ course.pk }}">Добавить задание</a></p>
{% endif %}

{% if course.homeworks.exists %}
    <h2>Задания</h2>
    {% for homework in homeworks %}
        <div>
            <h3><a href="{{ homework.get_absolute_url }}">{{ homework.title }}</a></h3>
            <p>Курс: <a href="{% url 'assign:course_detail' pk=course.pk %}">{{ course.title }}</a></p>
            <p class="date">Опубликовано {{ homework.publish }}, автор: {{ homework.author }}</p>
            {{ homework.body|markdown|truncatewords_html:30 }}
        </div>
    {% endfor %}
{% else %}
    <p>В выбранном курсе пока нет заданий.</p>
{% endif %}
{% endblock %}
